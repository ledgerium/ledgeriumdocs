

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Accessing Contracts and Transactions &mdash; Ledgerium Docs 1.1.0alpha documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="LedgeriumWeb3js" href="LedgeriumWeb3js.html" />
    <link rel="prev" title="Contracts" href="Contracts.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Ledgerium Docs
          

          
          </a>

          
            
            
              <div class="version">
                1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">WELCOME TO DOCS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">LEDGERIUM OVERVIEW</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Ledgerium_Core.html">Ledgerium Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="Connecting_to_Ledgerium_Core.html">Connecting to Ledgerium Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="Account_Management.html">Account Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="Account_Management.html#accounts">Accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="Account_Management.html#keyfiles">Keyfiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="Account_Management.html#creating-an-account">Creating an account</a></li>
<li class="toctree-l1"><a class="reference internal" href="Account_Management.html#importing-your-presale-wallet">Importing your presale wallet</a></li>
<li class="toctree-l1"><a class="reference internal" href="Account_Management.html#updating-an-account">Updating an account</a></li>
<li class="toctree-l1"><a class="reference internal" href="Account_Management.html#backup-and-restore-accounts">Backup and restore accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="XLG.html">XLG</a></li>
<li class="toctree-l1"><a class="reference internal" href="The_Ledgerium_network.html">The Ledgerium network</a></li>
<li class="toctree-l1"><a class="reference internal" href="Test_Networks.html">Test Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="Setting_up_a_local_private_testnet.html">Setting up a local private TestNet</a></li>
<li class="toctree-l1"><a class="reference internal" href="XLG_Reward.html">XLG Reward</a></li>
<li class="toctree-l1"><a class="reference internal" href="Ledgerium_Application.html">Ledgerium Application</a></li>
</ul>
<p class="caption"><span class="caption-text">LEDGERIUM CONTRACT AND TRANSACTIONS</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Account_Types,_Gas,_and_Transactions.html">Account Types, Gas, and Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Contracts.html">Contracts</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Accessing Contracts and Transactions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="LedgeriumWeb3js.html">LedgeriumWeb3js</a></li>
<li class="toctree-l2"><a class="reference internal" href="Console.html">Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="Viewing_Contracts_and_Transactions.html">Viewing Contracts and Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="RPC.html">RPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Accessing Contracts and Transactions</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">LEDGERIUM TESTS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Ledgerium_Test_Suite.html">Ledgerium Test Suite</a></li>
</ul>
<p class="caption"><span class="caption-text">GLOSSARY</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Words.html">Words</a></li>
</ul>
<p class="caption"><span class="caption-text">FREQUENTLY ASKED QUESTIONS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Questions.html">Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Ledgerium Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Accessing Contracts and Transactions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Accessing_Contracts_and_Transactions.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="accessing-contracts-and-transactions">
<h1>Accessing Contracts and Transactions<a class="headerlink" href="#accessing-contracts-and-transactions" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Accessing Contracts and Transactions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="LedgeriumWeb3js.html">LedgeriumWeb3js</a></li>
<li class="toctree-l1"><a class="reference internal" href="Console.html">Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="Viewing_Contracts_and_Transactions.html">Viewing Contracts and Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="RPC.html">RPC</a></li>
</ul>
</div>
<div class="section" id="id1">
<h2>Accessing Contracts and Transactions<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>In previous sections we have seen how contracts can be written, deployed and interacted with. Now it’s time to dive into the details of communicating
with the Ledgerium network and smart contracts.</p>
<p>A Ledgerium node offers a <a class="reference external" href="https://wikipedia.org/wiki/Remote_procedure_call">RPC</a> interface. This interface gives Ðapp’s access to the Ledgerium
blockchain and functionality that the node provides, such as compiling smart contract code. It uses a subset of the
<a class="reference external" href="http://www.jsonrpc.org/specification">JSON-RPC 2.0</a> specification (no support for notifications or named parameters) as the serialisation protocol and
is available over HTTP and IPC (unix domain sockets on linux/OSX and named pipe’s on Windows).</p>
<p>If you are not interested in the details but are looking for an easy to use javascript library you can skip the following sections and continue with <a class="reference internal" href="#using-web3-js"><span class="std std-ref">Using Web3</span></a>.</p>
<p>The RPC interface uses a couple of conventions that are not part of the JSON-RPC 2.0 specification:</p>
<ul class="simple">
<li>Numbers are hex encoded. This decision was made because some languages have no or limited support for working with extremely large numbers. To prevent
these type of errors numbers are hex encoded and it is up to the developer to parse these numbers and handle them appropriately. See the
<a class="reference external" href="https://github.com/ethereum/wiki/wiki/JSON-RPC#hex-value-encoding">hex encoding section</a> on the wiki for examples.</li>
<li>Default block number, several RPC methods accept a block number. In some cases it’s not possible to give a block number or not very convenient. For
these cases the default block number can be one of these strings [“earliest”, “latest”, “pending”]. See the
<a class="reference external" href="https://github.com/ethereum/wiki/wiki/JSON-RPC#the-default-block-parameter">wiki page</a> for a list of RPC methods that use the default block parameters.</li>
</ul>
<p>We will go through the different steps to deploy the following contract using only the RPC interface.</p>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">contract</span> <span class="n">Multiply7</span> <span class="p">{</span>
   <span class="n">event</span> <span class="n">Print</span><span class="p">(</span><span class="n">uint</span><span class="p">);</span>
   <span class="n">function</span> <span class="n">multiply</span><span class="p">(</span><span class="n">uint</span> <span class="nb">input</span><span class="p">)</span> <span class="n">returns</span> <span class="p">(</span><span class="n">uint</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">Print</span><span class="p">(</span><span class="nb">input</span> <span class="o">*</span> <span class="mi">7</span><span class="p">);</span>
      <span class="k">return</span> <span class="nb">input</span> <span class="o">*</span> <span class="mi">7</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The first thing to do is make sure the HTTP RPC interface is enabled. This means for geth we supply the <code class="docutils literal notranslate"><span class="pre">--rpc</span></code> flag on startup and for eth the <code class="docutils literal notranslate"><span class="pre">-j</span></code>
flag. In this example we use the geth node on a private development chain. Using this approach we don’t need ether on the real network.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">geth</span> <span class="o">--</span><span class="n">rpc</span> <span class="o">--</span><span class="n">dev</span> <span class="o">--</span><span class="n">mine</span> <span class="o">--</span><span class="n">minerthreads</span> <span class="mi">1</span> <span class="o">--</span><span class="n">unlock</span> <span class="mi">0</span> <span class="n">console</span> <span class="mi">2</span><span class="o">&gt;&gt;</span><span class="n">geth</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
<p>This will start the HTTP RPC interface on <code class="docutils literal notranslate"><span class="pre">http://localhost:8545</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">geth supports <a class="reference external" href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing">CORS</a>, see the <code class="docutils literal notranslate"><span class="pre">--rpccorsdomain</span></code> flag for more information.</p>
</div>
<p>We can verify that the interface is running by retrieving the coinbase address and balance using <a class="reference external" href="https://curl.haxx.se/download.html">curl</a>. Please
note that data in these examples will differ on your local node. If you want to try these commands replace the request params accordingly.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">curl</span> <span class="o">--</span><span class="n">data</span> <span class="s1">&#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;eth_coinbase&quot;, &quot;id&quot;:1}&#39;</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="n">localhost</span><span class="p">:</span><span class="mi">8545</span>
<span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="s2">&quot;result&quot;</span><span class="p">:[</span><span class="s2">&quot;0x9b1d35635cc34752ca54713bb99d38614f63c955&quot;</span><span class="p">]}</span>

<span class="o">&gt;</span> <span class="n">curl</span> <span class="o">--</span><span class="n">data</span> <span class="s1">&#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;eth_getBalance&quot;, &quot;params&quot;: [&quot;0x9b1d35635cc34752ca54713bb99d38614f63c955&quot;, &quot;latest&quot;], &quot;id&quot;:2}&#39;</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="n">localhost</span><span class="p">:</span><span class="mi">8545</span>
<span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="s2">&quot;result&quot;</span><span class="p">:</span><span class="s2">&quot;0x1639e49bba16280000&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>Remember when we said that numbers are hex encoded? In this case the balance is returned in wei as a hex string. If we want to have the balance in
ether as a number we can use web3 from the geth console.</p>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">web3</span><span class="o">.</span><span class="n">fromWei</span><span class="p">(</span><span class="s2">&quot;0x1639e49bba16280000&quot;</span><span class="p">,</span> <span class="s2">&quot;ether&quot;</span><span class="p">)</span>
<span class="s2">&quot;410&quot;</span>
</pre></div>
</div>
<p>Now that we have some ether on our private development chain we can deploy the contract. The first step is to compile the Multiply7 contract to byte code that can be sent to the EVM.  Follow these <a class="reference external" href="http://solidity.readthedocs.org/en/latest/installing-solidity.html">these</a>
instructions to install solc, the solidity compiler.</p>
<p>The next step is to compile the Multiply7 contract to byte code that can be send to the EVM.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">echo</span> <span class="s1">&#39;pragma solidity ^0.4.16; contract Multiply7 { event Print(uint); function multiply(uint input) public returns (uint) { Print(input * 7); return input * 7; } }&#39;</span> <span class="o">|</span> <span class="n">solc</span> <span class="o">--</span><span class="nb">bin</span>
<span class="o">=======</span> <span class="o">&lt;</span><span class="n">stdin</span><span class="o">&gt;</span><span class="p">:</span><span class="n">Multiply7</span> <span class="o">=======</span>
<span class="n">Binary</span><span class="p">:</span>
<span class="mi">6060604052341561000</span><span class="n">f57600080fd5b60eb8061001d6000396000f300606060405260043610603f576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063c6888fa1146044575b600080fd5b3415604e57600080fd5b606260048080359060200190919050506078565b6040518082815260200191505060405180910390f35b60007f24abdb5865df5079dcc5ac590ff6f01d5c16edbc5fab4e195d9febd1114503da600783026040518082815260200191505060405180910390a16007820290509190505600a165627a7a7230582040383f19d9f65246752244189b02f56e8d0980ed44e7a56c0b200458caad20bb0029</span>
</pre></div>
</div>
<p>Now that we have the compiled code we need to determine how much gas it costs to deploy it. The RPC interface has an <code class="docutils literal notranslate"><span class="pre">eth_estimateGas</span></code> method that will
give us an estimate.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">curl</span> <span class="o">--</span><span class="n">data</span> <span class="s1">&#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;: &quot;eth_estimateGas&quot;, &quot;params&quot;: [{&quot;from&quot;: &quot;0x9b1d35635cc34752ca54713bb99d38614f63c955&quot;, &quot;data&quot;: &quot;0x6060604052341561000f57600080fd5b60eb8061001d6000396000f300606060405260043610603f576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063c6888fa1146044575b600080fd5b3415604e57600080fd5b606260048080359060200190919050506078565b6040518082815260200191505060405180910390f35b60007f24abdb5865df5079dcc5ac590ff6f01d5c16edbc5fab4e195d9febd1114503da600783026040518082815260200191505060405180910390a16007820290509190505600a165627a7a7230582040383f19d9f65246752244189b02f56e8d0980ed44e7a56c0b200458caad20bb0029&quot;}], &quot;id&quot;: 5}&#39;</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="n">localhost</span><span class="p">:</span><span class="mi">8545</span>
<span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="s2">&quot;result&quot;</span><span class="p">:</span><span class="s2">&quot;0x1c31e&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>And finally deploy the contract.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">curl</span> <span class="o">--</span><span class="n">data</span> <span class="s1">&#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;: &quot;eth_sendTransaction&quot;, &quot;params&quot;: [{&quot;from&quot;: &quot;0x9b1d35635cc34752ca54713bb99d38614f63c955&quot;, &quot;gas&quot;: &quot;0x1c31e&quot;, &quot;data&quot;: &quot;0x6060604052341561000f57600080fd5b60eb8061001d6000396000f300606060405260043610603f576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063c6888fa1146044575b600080fd5b3415604e57600080fd5b606260048080359060200190919050506078565b6040518082815260200191505060405180910390f35b60007f24abdb5865df5079dcc5ac590ff6f01d5c16edbc5fab4e195d9febd1114503da600783026040518082815260200191505060405180910390a16007820290509190505600a165627a7a7230582040383f19d9f65246752244189b02f56e8d0980ed44e7a56c0b200458caad20bb0029&quot;}], &quot;id&quot;: 6}&#39;</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="n">localhost</span><span class="p">:</span><span class="mi">8545</span>
<span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="s2">&quot;result&quot;</span><span class="p">:</span><span class="s2">&quot;0xe1f3095770633ab2b18081658bad475439f6a08c902d0915903bafff06e6febf&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>The transaction is accepted by the node and a transaction hash is returned. We can use this hash to track the transaction.</p>
<p>The next step is to determine the address where our contract is deployed. Each executed transaction will create a receipt. This receipt contains
various information about the transaction such as in which block the transaction was included and how much gas was used by the EVM. If a transaction
creates a contract it will also contain the contract address. We can retrieve the receipt with the <code class="docutils literal notranslate"><span class="pre">eth_getTransactionReceipt</span></code> RPC method.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">curl</span> <span class="o">--</span><span class="n">data</span> <span class="s1">&#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;: &quot;eth_getTransactionReceipt&quot;, &quot;params&quot;: [&quot;0xe1f3095770633ab2b18081658bad475439f6a08c902d0915903bafff06e6febf&quot;], &quot;id&quot;: 7}&#39;</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="n">localhost</span><span class="p">:</span><span class="mi">8545</span>
<span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span><span class="s2">&quot;result&quot;</span><span class="p">:{</span><span class="s2">&quot;blockHash&quot;</span><span class="p">:</span><span class="s2">&quot;0x77b1a4f6872b9066312de3744f60020cbd8102af68b1f6512a05b7619d527a4f&quot;</span><span class="p">,</span><span class="s2">&quot;blockNumber&quot;</span><span class="p">:</span><span class="s2">&quot;0x1&quot;</span><span class="p">,</span><span class="s2">&quot;contractAddress&quot;</span><span class="p">:</span><span class="s2">&quot;0x4d03d617d700cf81935d7f797f4e2ae719648262&quot;</span><span class="p">,</span><span class="s2">&quot;cumulativeGasUsed&quot;</span><span class="p">:</span><span class="s2">&quot;0x1c31e&quot;</span><span class="p">,</span><span class="s2">&quot;from&quot;</span><span class="p">:</span><span class="s2">&quot;0x9b1d35635cc34752ca54713bb99d38614f63c955&quot;</span><span class="p">,</span><span class="s2">&quot;gasUsed&quot;</span><span class="p">:</span><span class="s2">&quot;0x1c31e&quot;</span><span class="p">,</span><span class="s2">&quot;logs&quot;</span><span class="p">:[],</span><span class="s2">&quot;logsBloom&quot;</span><span class="p">:</span><span class="s2">&quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="p">,</span><span class="s2">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;0x1&quot;</span><span class="p">,</span><span class="s2">&quot;to&quot;</span><span class="p">:</span><span class="n">null</span><span class="p">,</span><span class="s2">&quot;transactionHash&quot;</span><span class="p">:</span><span class="s2">&quot;0xe1f3095770633ab2b18081658bad475439f6a08c902d0915903bafff06e6febf&quot;</span><span class="p">,</span><span class="s2">&quot;transactionIndex&quot;</span><span class="p">:</span><span class="s2">&quot;0x0&quot;</span><span class="p">}}</span>
</pre></div>
</div>
<p>We can see that our contract was created on <code class="docutils literal notranslate"><span class="pre">0x4d03d617d700cf81935d7f797f4e2ae719648262</span></code>. If you got null instead of a receipt the transaction has
not been included in a block yet. Wait for a moment and check if your miner is running and retry it.</p>
<p>Now that our contract is deployed we can interact with it. There are 2 methods for this, sending a transaction or <a class="reference internal" href="Contracts.html#interacting-with-a-contract"><span class="std std-ref">using call as previously explained</span></a>. In this example we will be sending a transaction to the multiply method of the contract.</p>
<p>If we look at the documentation for the <a class="reference external" href="https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_sendtransaction">eth_sendTransaction</a> we can see that we need to supply
several arguments. In our case we need to specify the <code class="docutils literal notranslate"><span class="pre">from</span></code>, <code class="docutils literal notranslate"><span class="pre">to</span></code> and <code class="docutils literal notranslate"><span class="pre">data</span></code> arguments. <code class="docutils literal notranslate"><span class="pre">From</span></code> is the public address of our account and <code class="docutils literal notranslate"><span class="pre">to</span></code>
the contract address. The <code class="docutils literal notranslate"><span class="pre">data</span></code> argument is a bit harder. It contains a payload that defines which method must be called and with which arguments.
This is where the ABI comes into play. The ABI defines how to define and encode data for the EVM. You can read
<a class="reference external" href="https://github.com/ethereum/wiki/wiki/Ethereum-Contract-ABI">all the details about the ABI here</a>.</p>
<p>The bytes of the payload is the function selector and defines which method is called. This is done by taking the first 4 bytes from the Keccak hash
over the function name and its argument types and hex encode it. The <cite>multiply</cite> function accepts an <cite>uint</cite> which is an
<a class="reference external" href="http://solidity.readthedocs.org/en/latest/types.html#integers">alias</a> for <cite>uint256</cite>. This leaves us with:</p>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">web3</span><span class="o">.</span><span class="n">sha3</span><span class="p">(</span><span class="s2">&quot;multiply(uint256)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="s2">&quot;0xc6888fa1&quot;</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://github.com/ethereum/wiki/wiki/Ethereum-Contract-ABI#function-selector">this page</a> for details.</p>
<p>The next step is to encode the arguments. We only have one uint256, lets assume we supply the value 6. The ABI has a
<a class="reference external" href="https://github.com/ethereum/wiki/wiki/Ethereum-Contract-ABI#argument-encoding">section</a> which specifies how to encode uint256 types.</p>
<blockquote>
<div><cite>int&lt;M&gt;: enc(X) is the big-endian two’s complement encoding of X, padded on the higher-oder (left) side with 0xff for negative X and with zero bytes
for positive X such that the length is a multiple of 32 bytes.</cite></div></blockquote>
<p>This encodes to <code class="docutils literal notranslate"><span class="pre">0000000000000000000000000000000000000000000000000000000000000006</span></code>.</p>
<p>Combining the function selector and the encoded argument our <code class="docutils literal notranslate"><span class="pre">data</span></code> will be <code class="docutils literal notranslate"><span class="pre">0xc6888fa10000000000000000000000000000000000000000000000000000000000000006</span></code>.</p>
<p>Lets try it:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">curl</span> <span class="o">--</span><span class="n">data</span> <span class="s1">&#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;: &quot;eth_sendTransaction&quot;, &quot;params&quot;: [{&quot;from&quot;: &quot;0x9b1d35635cc34752ca54713bb99d38614f63c955&quot;, &quot;to&quot;: &quot;0x4d03d617d700cf81935d7f797f4e2ae719648262&quot;, &quot;data&quot;: &quot;0xc6888fa10000000000000000000000000000000000000000000000000000000000000006&quot;}], &quot;id&quot;: 8}&#39;</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="n">localhost</span><span class="p">:</span><span class="mi">8545</span>
<span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="s2">&quot;result&quot;</span><span class="p">:</span><span class="s2">&quot;0x50905bea8043e1166703a2a72390f6e6eb4f23150c8e7d13094a6d82ce89a054&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>Since we sent a transaction we got the transaction hash returned. If we retrieve the receipt we can see something new:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nx">blockHash</span><span class="o">:</span> <span class="s2">&quot;0x55262092dc46db5c7d3595decd4317780896c765c4db69cf2d5f650e46249b13&quot;</span><span class="p">,</span>
  <span class="nx">blockNumber</span><span class="o">:</span> <span class="mi">6</span><span class="p">,</span>
  <span class="nx">contractAddress</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nx">cumulativeGasUsed</span><span class="o">:</span> <span class="mi">22774</span><span class="p">,</span>
  <span class="nx">from</span><span class="o">:</span> <span class="s2">&quot;0x9b1d35635cc34752ca54713bb99d38614f63c955&quot;</span><span class="p">,</span>
  <span class="nx">gasUsed</span><span class="o">:</span> <span class="mi">22774</span><span class="p">,</span>
<span class="hll">  <span class="nx">logs</span><span class="o">:</span> <span class="p">[{</span>
</span>      <span class="nx">address</span><span class="o">:</span> <span class="s2">&quot;0x4d03d617d700cf81935d7f797f4e2ae719648262&quot;</span><span class="p">,</span>
      <span class="nx">blockHash</span><span class="o">:</span> <span class="s2">&quot;0x55262092dc46db5c7d3595decd4317780896c765c4db69cf2d5f650e46249b13&quot;</span><span class="p">,</span>
      <span class="nx">blockNumber</span><span class="o">:</span> <span class="mi">6</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="s2">&quot;0x000000000000000000000000000000000000000000000000000000000000002a&quot;</span><span class="p">,</span>
      <span class="nx">logIndex</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">removed</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">topics</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;0x24abdb5865df5079dcc5ac590ff6f01d5c16edbc5fab4e195d9febd1114503da&quot;</span><span class="p">],</span>
      <span class="nx">transactionHash</span><span class="o">:</span> <span class="s2">&quot;0x50905bea8043e1166703a2a72390f6e6eb4f23150c8e7d13094a6d82ce89a054&quot;</span><span class="p">,</span>
      <span class="nx">transactionIndex</span><span class="o">:</span> <span class="mi">0</span>
  <span class="p">}],</span>
  <span class="nx">logsBloom</span><span class="o">:</span> <span class="s2">&quot;0x00000000000008000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000020800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="p">,</span>
  <span class="nx">status</span><span class="o">:</span> <span class="s2">&quot;0x1&quot;</span><span class="p">,</span>
  <span class="nx">to</span><span class="o">:</span> <span class="s2">&quot;0x4d03d617d700cf81935d7f797f4e2ae719648262&quot;</span><span class="p">,</span>
  <span class="nx">transactionHash</span><span class="o">:</span> <span class="s2">&quot;0x50905bea8043e1166703a2a72390f6e6eb4f23150c8e7d13094a6d82ce89a054&quot;</span><span class="p">,</span>
  <span class="nx">transactionIndex</span><span class="o">:</span> <span class="mi">0</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The receipt contains a log. This log was generated by the EVM on transaction execution and included in the receipt. If we look at the multipy function
we can see that the Print event was raised with the input times 7. Since the argument for the Print event was a uint256 we can decode it according to
the ABI rules which will leave us with the expected decimal 42.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span>&gt; echo $((0x000000000000000000000000000000000000000000000000000000000000002a))
42
</pre></div>
</div>
<p>Apart from the data it is worth noting that topics can be used to determine which
event created the log:</p>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">web3</span><span class="o">.</span><span class="n">sha3</span><span class="p">(</span><span class="s2">&quot;Print(uint256)&quot;</span><span class="p">)</span>
<span class="s2">&quot;24abdb5865df5079dcc5ac590ff6f01d5c16edbc5fab4e195d9febd1114503da&quot;</span>
</pre></div>
</div>
<p>You can read more about events, topics and indexing in the <a class="reference external" href="http://solidity.readthedocs.org/en/latest/contracts.html#events">Solidity tutorial</a>.</p>
<p>This was just a brief introduction into some of the most common tasks. See for a full list of available RPC methods the
<a class="reference external" href="https://github.com/ethereum/wiki/wiki/JSON-RPC#json-rpc-methods">RPC wiki page</a>.</p>
<p>As we have seen in the previous example using the JSON-RPC interface can be quite tedious and error-prone, especially when we have to deal with the
ABI. Web3.js is a javascript library that works on top of the Ledgerium RPC interface. Its goal is to provide a more user friendly interface and
reducing the chance for errors.</p>
<p>Deploying the Multiply7 contract using web3 would look like:</p>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span>var source = &#39;contract Multiply7 { event Print(uint); function multiply(uint input) returns (uint) { Print(input * 7); return input * 7; } }&#39;;
var compiled = web3.eth.compile.solidity(source);
var code = compiled.Multiply7.code;
var abi = compiled.Multiply7.info.abiDefinition;

web3.eth.contract(abi).new({from: &quot;0xeb85a5557e5bdc18ee1934a89d8bb402398ee26a&quot;, data: code}, function (err, contract) {
   if (!err &amp;&amp; contract.address)
      console.log(&quot;deployed on:&quot;, contract.address);
   }
);

deployed on: 0x0ab60714033847ad7f0677cc7514db48313976e2
</pre></div>
</div>
<p>Load a deployed contract and send a transaction:</p>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;contract Multiply7 { event Print(uint); function multiply(uint input) returns (uint) { Print(input * 7); return input * 7; } }&#39;</span><span class="p">;</span>
<span class="n">var</span> <span class="n">compiled</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">compile</span><span class="o">.</span><span class="n">solidity</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
<span class="n">var</span> <span class="n">Multiply7</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">compiled</span><span class="o">.</span><span class="n">Multiply7</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">abiDefinition</span><span class="p">);</span>
<span class="n">var</span> <span class="n">multi</span> <span class="o">=</span> <span class="n">Multiply7</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="s2">&quot;0x0ab60714033847ad7f0677cc7514db48313976e2&quot;</span><span class="p">)</span>
<span class="n">multi</span><span class="o">.</span><span class="n">multiply</span><span class="o">.</span><span class="n">sendTransaction</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="p">{</span><span class="n">from</span><span class="p">:</span> <span class="s2">&quot;0xeb85a5557e5bdc18ee1934a89d8bb402398ee26a&quot;</span><span class="p">})</span>
</pre></div>
</div>
<p>Register a callback which is called when the <code class="docutils literal notranslate"><span class="pre">Print</span></code> event created a log.</p>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">multi</span><span class="o">.</span><span class="n">Print</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">err</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span> <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">data</span><span class="p">))</span> <span class="p">})</span>
<span class="p">{</span><span class="s2">&quot;address&quot;</span><span class="p">:</span><span class="s2">&quot;0x0ab60714033847ad7f0677cc7514db48313976e2&quot;</span><span class="p">,</span><span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;&quot;</span><span class="p">:</span><span class="s2">&quot;21&quot;</span><span class="p">},</span><span class="s2">&quot;blockHash&quot;</span><span class="p">:</span><span class="s2">&quot;0x259c7dc07c99eed9dd884dcaf3e00a81b2a1c83df2d9855ce14c464b59f0c8b3&quot;</span><span class="p">,</span><span class="s2">&quot;blockNumber&quot;</span><span class="p">:</span><span class="mi">539</span><span class="p">,</span><span class="s2">&quot;event&quot;</span><span class="p">:</span><span class="s2">&quot;Print&quot;</span><span class="p">,</span><span class="s2">&quot;logIndex&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;transactionHash&quot;</span><span class="p">:</span><span class="s2">&quot;0x5c115aaa5418118457e96d3c44a3b66fe9f2bead630d79455d0ecd832dc88d48&quot;</span><span class="p">,</span><span class="s2">&quot;transactionIndex&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
</pre></div>
</div>
<p>See for more information the <a class="reference external" href="https://github.com/ethereum/wiki/wiki/JavaScript-API">web3.js</a> wiki page.</p>
<p>The geth <a class="reference external" href="https://github.com/ethereum/go-ethereum/wiki/JavaScript-Console">console</a> offers a command line interface with a javascript runtime. It
can connect to a local or remote geth or eth node. It will load the web3.js library that users can use. This allows users to deploy and interact with
smart contract from the console using web3.js. In fact the examples in the <a class="reference internal" href="#using-web3-js"><span class="std std-ref">Web3.js</span></a> section can by copied into the console.</p>
<p>There are several online blockchain explorers available that will allow you to inspect the Ledgerium blockchain.
See for a list: <a class="reference internal" href="#blockchain-explorers"><span class="std std-ref">Blockchain explorers</span></a>.</p>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="LedgeriumWeb3js.html" class="btn btn-neutral float-right" title="LedgeriumWeb3js" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Contracts.html" class="btn btn-neutral float-left" title="Contracts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Ledgerium Pty Ltd.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>